/**
 * jQuery Fancy Form plugin
 * 
 * Spice up your form with unique, intuitive form interactions
 * 
 * @author dtelepathy
 * @version 1.0.0
 */
var FancyForm;(function($){FancyForm=function(elems){var $elems=$(elems);this.fancy($elems)};FancyForm.prototype.fancyCheckbox=function($elem){$elem.wrap('<label class="fancy-checkbox" />');var $wrapper=$elem.closest('.fancy-checkbox');$wrapper.append('<span class="on"><span>On</span></span><span class="off"><span>Off</span></span>').addClass($elem[0].checked?'on':'off').delegate('input[type="checkbox"]','click',function(event){if(this.checked)$wrapper.removeClass('off').addClass('on');else $wrapper.removeClass('on').addClass('off')})};FancyForm.prototype.fancyRadios=function($elems){var $labels=$elems.closest('label');$labels.wrapAll('<span class="fancy-radios" />');$labels.filter(':first').addClass('first');$labels.filter(':last').addClass('last');$elems.each(function(i){var $elem=$elems.eq(i);var $label=$labels.eq(i);$label.delegate('input[type="radio"]','click',function(event){if(this.checked){$labels.removeClass('on');$label.addClass('on')}}).addClass('radio-'+i);if(this.checked)$label.addClass('on')})};FancyForm.prototype.fancySelect=function($elem){var self=this;$elem.wrap('<span class="fancy-select" />');var $wrapper=$elem.closest('.fancy-select');var $options=$elem.find('option');$wrapper.width($elem.outerWidth()).bind('click',function(event){self.hideOptions();self.showOptions($elem,$options)});$wrapper.append('<span class="selected" />');var $selected=$wrapper.find('.selected');$selected.text($options.filter(':selected').text());$('body').bind('click',function(event){var $target=$(event.target);if(($target.closest('#fancyform-options-dropdown').length<1)&&($target.closest('.fancy-select').length<1)){self.hideOptions()}})};FancyForm.prototype.showOptions=function($elem,$options){var self=this;this.dropdown=$('#fancyform-options-dropdown');if(this.dropdown.length<1){$('body').append('<div id="fancyform-options-dropdown"><span class="options"></span></div>');this.dropdown=$('#fancyform-options-dropdown');this.dropdown.delegate('.option','click',function(){var $select=$.data(self.dropdown[0],'dom-select');var $options=$select.find('option');var $value=$(this).attr('data-value');var old_value="";$options.each(function(i){if(this.selected)old_value=this.value;this.selected=(this.value==$value);if(this.selected==true)$select.siblings('.selected').text(this.text)});self.hideOptions();if(old_value!=$value)$select.trigger('change')}).bind('click',function(){self.hideOptions()})}$.data(this.dropdown[0],'dom-select',$elem);this.dropdown.find('span.option').remove();var optionsHTML="";$options.each(function(i){optionsHTML+='<span class="option'+(i==$options.length-1?' last':'')+(this.selected==true?' selected':'')+'" data-value="'+this.value+'">'+this.text+'</span>'});var $dropdown_options=this.dropdown.find('.options');$dropdown_options.append(optionsHTML);this.dropdown.css({left:"-999em"}).show();var offset=$elem.closest('.fancy-select').offset(),windowHeight=$(window).height(),scrollTop=$(window).scrollTop(),dropdownHeight=this.dropdown.outerHeight(),optionHeight=$dropdown_options.find('.option').outerHeight();if(((dropdownHeight+offset.top)>(windowHeight+scrollTop))&&(windowHeight>dropdownHeight)&&((offset.top-scrollTop)>dropdownHeight)){this.dropdown.addClass('invert');offset.top=offset.top-dropdownHeight}else{this.dropdown.removeClass('invert')}this.dropdown.css({top:offset.top,left:offset.left,'min-width':$elem.closest('.fancy-select').outerWidth()});$dropdown_options.css('max-height',optionHeight*10)};FancyForm.prototype.hideOptions=function(){if(this.dropdown){this.dropdown.find('span.option').remove();this.dropdown.hide()}};FancyForm.prototype.fancyText=function($elem){$elem.addClass('fancy-text')};FancyForm.prototype.fancy=function($elems){var self=this;var groups={};$elems.each(function(i){var $elem=$elems.eq(i);if($elem.is('input')){switch($elem.prop('type')){case"radio":if(!groups[$elem.prop('name')]){self.fancyRadios($elems.filter('[name="'+$elem.prop('name')+'"]'));groups[$elem.prop('name')]=true}break;case"checkbox":self.fancyCheckbox($elem);break;case"text":default:self.fancyText($elem);break}}else if($elem.is('select')){self.fancySelect($elem)}})};jQuery.fn.fancy=function(){var data=$.data(this,'FancyForm');if(!data)data=$.data(this,'FancyForm',new FancyForm(this));return this}})(jQuery);